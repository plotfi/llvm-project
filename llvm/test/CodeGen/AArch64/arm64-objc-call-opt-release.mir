# RUN: llc -mtriple=aarch64--- -run-pass=aarch64-objc-call-opt %s -o - | FileCheck %s
--- |
  target datalayout = "e-m:o-i64:64-i128:128-n32:64-S128"
  target triple = "arm64-apple-ios7.0"

  ; Function Attrs: nounwind
  declare void @llvm.objc.release(i8*) #0

  ; Function Attrs: minsize optsize ssp
  define i32 @_Z3goov() local_unnamed_addr #1 {
    call void @objc_release(i8* null)
    ret i32 1
  }

  ; Function Attrs: nonlazybind
  declare void @objc_release(i8*) #2

  ; Function Attrs: nounwind
  declare void @llvm.stackprotector(i8*, i8**) #0

  attributes #0 = { nounwind }
  attributes #1 = { minsize optsize ssp }
  attributes #2 = { nonlazybind }

...
---
# CHECK-LABEL: name: _Z3goov
# CHECK-LABEL: bb.0:
# CHECK:         $x8 = ORRXrs $xzr, $x0, 0
# CHECK-NEXT:    $x20 = ORRXrs $xzr, $x8, 0
# CHECK-NEXT:    BL @OUTLINED_FUNCTION_RELEASE_x21
name:            _Z3goov
tracksRegLiveness: true
body:             |
  bb.0:
    liveins: $lr, $sp, $x0, $x8, $x21
    $sp = frame-setup SUBXri $sp, 16, 0

    $x8 = ORRXrs $xzr, $x0, 0
    $x0 = ORRXrs $xzr, $x21, 0
    $x20 = ORRXrs $xzr, $x8, 0
    BL @objc_release,  implicit-def dead $lr, implicit $sp, implicit-def $x0

    $sp = frame-setup ADDXri $sp, 16, 0
    RET undef $lr, implicit killed $x0
...
